{"version":3,"file":"error.spec.js","sourceRoot":"","sources":["../../../src/__tests__/polling-observer/error.spec.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,eAAe,EAAE,MAAM,iCAAiC,CAAC;AAClE,OAAO,YAAY,CAAC;AAGpB,EAAE,CAAC,8CAA8C,EAAE,GAAG,EAAE;IACtD,MAAM,CAAC,GAAG,EAAE,CAAC,IAAI,eAAe,CAAC,SAAkB,CAAC,CAAC;SAClD,YAAY,CAAC,IAAI,SAAS,CAAC,oCAAoC,CAAC,CAAC,CAAC;AACvE,CAAC,CAAC,CAAC;AAEH,EAAE,CAAC,iCAAiC,EAAE,CAAC,IAAI,EAAE,EAAE;IAC7C,MAAM,GAAG,GAAG,IAAI,eAAe,CAAW,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC;IACvD,GAAG,CAAC,OAAO,CACT,KAAK,IAAI,EAAE;QACT,MAAM,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC;IACnC,CAAC,EACD,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAC;IAErB,GAAG,CAAC,QAAQ,GAAG,CAAC,CAAC,EAAE,EAAE;QACnB,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,CAAqB,CAAC;QAEjD,MAAM,CAAC,MAAM,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QACtC,MAAM,CAAC,MAAM,CAAC,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC,CAAC;QACzD,IAAI,EAAE,CAAC;IACT,CAAC,CAAC;AACJ,CAAC,EAAE,IAAI,CAAC,CAAC","sourcesContent":["import type { OnfinishRejected} from '../../polling-observer/index.js';\nimport { PollingObserver } from '../../polling-observer/index.js';\nimport './setup.js';\nimport type { MockData } from './test_typings.js';\n\nit(`throws when 'conditionCallback' is undefined`, () => {\n  expect(() => new PollingObserver(undefined as never))\n    .toThrowError(new TypeError(`'conditionCallback' is not defined`));\n});\n\nit(`stops polling when error occurs`, (done) => {\n  const obs = new PollingObserver<MockData>(() => false);\n  obs.observe(\n    async () => {\n      throw new Error('polling error');\n    },\n    { interval: 1e3 });\n\n  obs.onfinish = (d) => {\n    const { status, reason } = d as OnfinishRejected;\n\n    expect(status).toStrictEqual('error');\n    expect(reason).toStrictEqual(new Error('polling error'));\n    done();\n  };\n}, 10e3);\n"]}